# Generated by dependency for development: otto

$otto_setup = <<COPY
# Copy our binary
sudo mv /tmp/dep-otto /usr/local/bin/otto

# Copy the upstart file
sudo mv /tmp/dep-otto.upstart.conf /etc/init/otto.conf

# Start it!
sudo start otto
COPY

# Sync our own dep folder in there
config.vm.synced_folder "/Users/Nick/workspace/go/src/github.com/elos/api", "/otto-deps/otto-6b1ce101-240c-2024-34c0-123bcacc8689"

# Copy files into a temp directory. The script will move them.
config.vm.provision "file",
  source: "/Users/Nick/.otto.d/cache/6b1ce101-240c-2024-34c0-123bcacc8689/dev-dep-output",
  destination: "/tmp/dep-otto"

config.vm.provision "file",
  source: "/Users/Nick/workspace/go/src/github.com/elos/api/.otto/compiled/app/dev-dep/upstart.conf",
  destination: "/tmp/dep-otto.upstart.conf"

config.vm.provision "shell",
  inline: $otto_setup

# Foundation configuration for dev dep

dir = "/otto/foundation-otto-1"
config.vm.synced_folder "/Users/Nick/workspace/go/src/github.com/elos/api/.otto/compiled/app/foundation-consul/app-dev-dep", dir
config.vm.provision "shell", inline: "cd #{dir} && bash #{dir}/main.sh"

